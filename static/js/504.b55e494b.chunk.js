"use strict";(self.webpackChunktrello=self.webpackChunktrello||[]).push([[504],{6504:function(e,r,n){n.r(r),n.d(r,{default:function(){return me}});var t=n(1413),i=n(3433),o=n(4165),l=n(5861),d=n(9439),s=n(2791),a=n(6871),c=n(4333),u=n(3168),x=n(5193),p=n(1614),f=n(3767),h=n(6151),m=n(5245),b=n(8844),g=n(7286),v=n(9138),Z=n(2823),j=n(4554),I=n(5661),k=n(9157),C=n(7391),w=n(7123),T=n(1134),y=n(184),E=function(e){var r=e.onClose,n=(0,T.cI)(),i=n.register,o=n.handleSubmit,l=n.formState.errors,d=(0,u.$)().t,s=(0,m.C)((function(e){return e.boards.singleBoard})).columns,c=(0,m.T)(),x=(0,a.UO)().boardId;return(0,y.jsx)("form",{onSubmit:o((function(e){var n=e.title;x&&c((0,g.wy)({boardId:x,title:n,order:s.length})),r()})),children:(0,y.jsxs)(j.Z,{sx:{width:"100%",maxWidth:"400px"},children:[(0,y.jsx)(I.Z,{children:d("COLUMN.CREATE_COLUMN_HEADER")}),(0,y.jsx)(k.Z,{children:(0,y.jsx)(C.Z,(0,t.Z)({label:d("TITLE"),fullWidth:!0,sx:{mt:2},variant:"outlined",error:!!l.title,helperText:l.title?l.title.message:""},i("title",{required:{value:!0,message:"".concat(d("FORM.REQUIRE_MSG"))}})))}),(0,y.jsxs)(w.Z,{children:[(0,y.jsx)(h.Z,{onClick:r,sx:{"&:hover":{color:"primary.contrastText"}},children:d("CANCEL_BTN")}),(0,y.jsx)(h.Z,{type:"submit",sx:{"&:hover":{color:"primary.contrastText"}},children:d("COLUMN.CREATE_COLUMN_BTN")})]})]})})},S=n(3773),R=n(1469),A=n(3400),N=n(890),O=n(4721),F=n(7247),_=n(2419),L=n(6711),M=n(8384),W=n(5677),U=function(e){var r=e.columnId,n=e.onClose,i=(0,T.cI)(),o=i.register,l=i.handleSubmit,d=i.formState.errors,s=(0,u.$)().t,c=(0,m.T)(),x=(0,a.UO)().boardId,p=(0,m.C)((function(e){return e.boards})).singleBoard;return(0,y.jsxs)("form",{onSubmit:l((function(e){var t,i,o=null===p||void 0===p||null===(t=p.columns)||void 0===t?void 0:t.find((function(e){return e.id===r})),l=(null===o||void 0===o||null===(i=o.tasks)||void 0===i?void 0:i.length)||0,d=(0,W.QN)().id;if(x){var s={id:"",title:e.title,order:l,description:e.description,userId:d,boardId:x,columnId:r};c((0,Z.vr)(s))}n()})),children:[(0,y.jsx)(I.Z,{children:s("TASK.CREATE_TASK_HEADER")}),(0,y.jsxs)(k.Z,{children:[(0,y.jsx)(C.Z,(0,t.Z)({label:s("TITLE"),fullWidth:!0,variant:"outlined",error:!!d.title,helperText:d.title?d.title.message:"",sx:{my:3}},o("title",{required:{value:!0,message:"".concat(s("FORM.REQUIRE_MSG"))}}))),(0,y.jsx)(C.Z,(0,t.Z)({label:s("DESCR"),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",error:!!d.description,helperText:d.description?d.description.message:""},o("description",{required:{value:!0,message:"".concat(s("FORM.REQUIRE_MSG"))}})))]}),(0,y.jsxs)(w.Z,{children:[(0,y.jsx)(h.Z,{onClick:n,sx:{"&:hover":{color:"primary.contrastText"}},children:s("CANCEL_BTN")}),(0,y.jsx)(h.Z,{type:"submit",sx:{"&:hover":{color:"primary.contrastText"}},children:s("TASK.CREATE")})]})]})},B=n(2429),P=n(6934),D=n(703),z=n(4852),K=n(3044),q=n(1286),G=n(9281),H=n(9836),Q=n(6890),Y=n(5855),$=n(3994),V=n(3382),X=function(e){var r,n=e.onClose,a=e.task,c=(0,T.cI)(),x=c.register,p=c.handleSubmit,f=c.formState.errors,b=(0,m.T)(),g=s.useState(a.files||[]),v=(0,d.Z)(g,2),E=v[0],S=v[1],_=s.useState(!1),L=(0,d.Z)(_,2),M=L[0],U=L[1],P=(0,m.C)((function(e){return e.boards.singleBoard})),z=P.id,K=P.columns,q=(0,u.$)().t,X=(0,m.C)((function(e){return e.boards})).usersAll,J=(null===X||void 0===X||null===(r=X.find((function(e){return e.id===a.userId})))||void 0===r?void 0:r.name)||"".concat(q("FILTER.UNKNOWN_USER")),ee=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var r,t,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=K.findIndex((function(e){var r;return null===(r=e.tasks)||void 0===r?void 0:r.find((function(e){return e.id===a.id}))})),i={tasks:(null===(r=K[t])||void 0===r?void 0:r.tasks)||[],boardId:z,taskId:a.id,columnId:K[t].id||"",indexColumns:t||0},b((0,Z._5)(i)),n();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)("form",{onSubmit:p((function(e){var r,t=null===(r=(0,W.QN)())||void 0===r?void 0:r.id,i=K.findIndex((function(e){var r;return null===(r=e.tasks)||void 0===r?void 0:r.find((function(e){return e.id===a.id}))})),o={id:a.id,order:a.order,title:e.title,description:e.description,userId:t,boardId:z,columnId:K[i].id||""};b((0,Z.xJ)({newTask:o,indexColumns:i})),n()})),children:(0,y.jsxs)(j.Z,{sx:{width:"100%",maxWidth:"500px"},children:[(0,y.jsxs)(I.Z,{sx:{display:"flex",justifyContent:"space-between","@media only screen and (max-width: 450px)":{flexDirection:"column"}},children:[q("TASK.EDIT"),(0,y.jsxs)(N.Z,{variant:"body1",sx:{m:0,px:1},children:[q("TASK.CREATE_BY")," ",(0,y.jsx)("span",{style:{color:"blue"},children:J})]})]}),(0,y.jsxs)(k.Z,{sx:{pb:0},children:[(0,y.jsx)(C.Z,(0,t.Z)({autoFocus:!0,defaultValue:a.title,margin:"dense",id:"title",label:q("TITLE"),type:"text",fullWidth:!0,variant:"outlined",error:Boolean(f.title),helperText:f.title?f.title.message:""},x("title",{required:{value:!0,message:"".concat(q("FORM.REQUIRE_MSG"))}}))),(0,y.jsx)(C.Z,(0,t.Z)({defaultValue:a.description,margin:"dense",id:"description",label:q("DESCR"),type:"text",fullWidth:!0,variant:"outlined",multiline:!0,rows:4,error:Boolean(f.description),helperText:f.description?f.description.message:""},x("description",{required:{value:!0,message:"".concat(q("FORM.REQUIRE_MSG"))}}))),E.length>0&&(0,y.jsx)(G.Z,{component:D.Z,children:(0,y.jsxs)(H.Z,{size:"small","aria-label":"a dense table",children:[(0,y.jsx)(Q.Z,{children:(0,y.jsxs)(Y.Z,{children:[(0,y.jsx)($.Z,{children:q("TASK.FILENAME")}),(0,y.jsx)($.Z,{align:"right",children:q("TASK.SIZE")}),(0,y.jsx)($.Z,{align:"right"})]})}),(0,y.jsx)(V.Z,{children:E.map((function(e){return(0,y.jsxs)(Y.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,y.jsx)($.Z,{component:"th",scope:"row",children:e.filename}),(0,y.jsx)($.Z,{align:"right",children:e.fileSize}),(0,y.jsx)($.Z,{align:"right",children:(0,y.jsx)(R.Z,{title:"Delete file",children:(0,y.jsx)(A.Z,{"aria-label":"delete file",color:"primary",size:"large",sx:{p:0},onClick:function(){return function(e){var r=E.filter((function(r){return r.filename!==e}));S(r)}(e.filename)},children:(0,y.jsx)(F.Z,{})})})})]},e.filename)}))})]})}),(0,y.jsx)(O.Z,{}),(0,y.jsxs)(h.Z,{variant:"outlined",component:"label",sx:{mt:1},children:[q("TASK.ADD_FILE"),(0,y.jsx)("input",(0,t.Z)((0,t.Z)({type:"file",hidden:!0},x("files",{required:!1})),{},{onChange:function(e){var r=e.target.files;if(r){var n={file:r[0],filename:r[0].name,fileSize:r[0].size};S([].concat((0,i.Z)(E),[n]))}}}))]})]}),(0,y.jsxs)(w.Z,{sx:{"@media only screen and (max-width: 450px)":{display:"flex",flexDirection:"column"}},children:[(0,y.jsx)(h.Z,{onClick:function(){return U(!0)},sx:{color:"red"},children:q("TASK.DELETE")}),(0,y.jsx)(h.Z,{onClick:n,sx:{"&:hover":{color:"primary.contrastText"}},children:q("CANCEL_BTN")}),(0,y.jsx)(h.Z,{type:"submit",sx:{"&:hover":{color:"primary.contrastText"}},children:q("UPDATE_BTN")})]}),(0,y.jsx)(B.Z,{isOpen:M,close:function(){return U(!1)},func:ee})]})})},J=X,ee=function(e){var r,n=e.task,i=e.index,o=s.useState(!1),l=(0,d.Z)(o,2),a=l[0],u=l[1],x=(0,m.C)((function(e){return e.boards})).usersAll,p=(null===x||void 0===x||null===(r=x.find((function(e){return e.id===n.userId})))||void 0===r?void 0:r.name)||"",f=(0,P.ZP)(D.Z)((function(e){var r=e.theme;return(0,t.Z)((0,t.Z)({},r.typography.h6),{},{textAlign:"left",paddingLeft:r.spacing(2),color:r.palette.text.primary,height:60,width:"100%",overflow:"auto",lineHeight:"60px",borderRadius:r.shape.borderRadius,display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:"0.6rem",marginBottom:r.spacing(1),marginTop:r.spacing(1),"&:hover":{boxShadow:"3px 3px 5px #5a5050","& .MuiSvgIcon-root":{opacity:"1"}}})}));function h(e){var r,n=0;for(r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n);var t="#";for(r=0;r<3;r+=1){t+="00".concat((n>>8*r&255).toString(16)).slice(-2)}return t}function b(e){var r=e||"d";return{sx:{bgcolor:h(r)},children:"".concat(r.split(" ").length>1?r.split(" ")[0][0]+r.split(" ")[1][0]:r[0])}}return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c._l,{draggableId:n.id,index:i,children:function(e){return(0,y.jsx)(z.ZP,(0,t.Z)((0,t.Z)((0,t.Z)({sx:{width:"100%",m:0,p:0},ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:(0,y.jsxs)(f,{onClick:function(){return u(!0)},sx:{gap:1},children:[(0,y.jsx)(N.Z,{variant:"h6",sx:{flexGrow:1},children:n.title}),(0,y.jsx)(q.Z,{sx:{opacity:"0"}}),(0,y.jsx)(K.Z,(0,t.Z)({},b(p)))]})}))}}),(0,y.jsx)(S.Z,{open:a,onClose:function(){return u(!1)},children:(0,y.jsx)(J,{onClose:function(){return u(!1)},task:n})})]})},re=function(e){var r=e.column,n=e.filters,x=(0,s.useState)(!1),p=(0,d.Z)(x,2),h=p[0],b=p[1],v=s.useState(!1),Z=(0,d.Z)(v,2),I=Z[0],k=Z[1],w=(0,T.cI)(),E=w.register,W=w.handleSubmit,P=w.formState.errors,D=(0,u.$)().t,z=s.useState(!1),K=(0,d.Z)(z,2),q=K[0],G=K[1],H=(0,a.UO)().boardId,Q=(0,m.T)(),Y=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H&&Q((0,g.eA)({boardId:H,columnId:r.id,order:r.order}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H&&Q((0,g.hM)({boardId:H,columnId:r.id,order:r.order,title:n.title})),b(!1);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,y.jsx)(c._l,{draggableId:r.id,index:r.order,children:function(e){return(0,y.jsxs)(f.Z,(0,t.Z)((0,t.Z)({spacing:0,sx:{width:"400px",minWidth:"400px",maxWidth:"400px",border:"1px solid Gray",borderRadius:2,py:1,ml:2,mr:2,backgroundColor:"rgba(213, 217, 233, .7)","@media only screen and (max-width: 450px)":{width:"100%",minWidth:"250px",maxWidth:"400px",ml:0,mr:0,p:1},maxHeight:"calc(100vh - 230px)"},component:"li",ref:e.innerRef},e.draggableProps),{},{children:[(0,y.jsxs)(j.Z,(0,t.Z)((0,t.Z)({sx:{width:"100%",py:.8,px:1.7,display:"flex",justifyContent:"space-between"}},e.dragHandleProps),{},{children:[h?(0,y.jsx)("form",{onSubmit:W($),children:(0,y.jsxs)(j.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItem:"center"},children:[(0,y.jsx)(C.Z,(0,t.Z)({defaultValue:r.title,variant:"standard",autoFocus:!0,error:!!P.title,helperText:P.title?P.title.message:"",sx:{cursor:"default",width:"70%",pl:1,input:{color:"gray",fontWeight:700,fontSize:"1.3rem"}}},E("title",{required:{value:!0,message:"".concat(D("FORM.REQUIRE_MSG"))}}))),(0,y.jsxs)(j.Z,{alignSelf:"center",children:[(0,y.jsx)(R.Z,{title:D("BOARD.CHANGE_NAME"),children:(0,y.jsx)(A.Z,{"aria-label":"change name",color:"primary",size:"large",sx:{p:.5},type:"submit",children:(0,y.jsx)(M.Z,{})})}),(0,y.jsx)(R.Z,{title:D("CANCEL_BTN"),children:(0,y.jsx)(A.Z,{"aria-label":"cancel",color:"primary",size:"large",sx:{p:.5},onClick:function(){return b(!1)},children:(0,y.jsx)(L.Z,{})})})]})]})}):(0,y.jsx)(N.Z,{align:"left",noWrap:!0,sx:{color:"gray",width:"70%",fontSize:"1.5rem",fontWeight:"bold","&:hover":{color:"primary.contrastText",cursor:"pointer"}},onClick:function(){return b(!0)},children:r.title}),(0,y.jsxs)(j.Z,{sx:{display:"flex"},children:[(0,y.jsx)(R.Z,{title:D("TASK.ADD_BTN"),children:(0,y.jsx)(A.Z,{"aria-label":"add new task",color:"primary",size:"large",sx:{p:0,pr:1},onClick:function(){return k(!0)},children:(0,y.jsx)(_.Z,{})})}),(0,y.jsx)(R.Z,{title:D("COLUMN.DELETE_BTN"),children:(0,y.jsx)(A.Z,{"aria-label":"delete column",color:"primary",size:"large",sx:{p:0},onClick:function(){return G(!0)},children:(0,y.jsx)(F.Z,{})})})]})]})),(0,y.jsx)(O.Z,{sx:{mt:1,mb:1}}),(0,y.jsx)(c.bK,{droppableId:r.id,type:"QUOTE",children:function(e){return(0,y.jsxs)(f.Z,(0,t.Z)((0,t.Z)({spacing:0,component:"ul",sx:{mt:0,pl:1.8,pr:1,paddingRight:".8rem",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:".7rem"},"&::-webkit-scrollbar-thumb ":{backgroundColor:"#c8c8c8",borderRadius:2},"&::-webkit-scrollbar-thumb:hover ":{backgroundColor:"#a8a8a8"},minHeight:"1vh","@media only screen and (max-width: 450px)":{pr:0,"&::-webkit-scrollbar":{width:"0",backgroundColor:"#f1f1f1"}}}},e.droppableProps),{},{ref:e.innerRef,children:[r.tasks&&(0,i.Z)(r.tasks).sort((function(e,r){return e.order-r.order})).filter((function(e){return(""===n.searchText||e.title.includes(n.searchText)||e.description.includes(n.searchText))&&(0===n.usersId.length||n.usersId.includes(e.userId)||n.usersId.includes("deleted")&&null==e.userId)})).map((function(e,r){return(0,y.jsx)(ee,{task:e,index:r},e.id)})),e.placeholder]}))}}),(0,y.jsx)(S.Z,{open:I,onClose:function(){return k(!1)},children:(0,y.jsx)(U,{columnId:r.id,onClose:function(){return k(!1)}})}),(0,y.jsx)(B.Z,{isOpen:q,close:function(){return G(!1)},func:Y})]}))}})},ne=re,te=n(2065),ie=n(4834),oe=n(8029),le=n(1889),de=n(8096),se=n(4925),ae=n(9321),ce=n(5022),ue=n(9174),xe=n(9900),pe=n(2059),fe=n(5403),he=function(e){var r=e.filters,n=e.setFilters,i=e.usersIdCreatedTasks,o=(0,m.C)((function(e){return e.boards.singleBoard})).title,l=(0,m.C)((function(e){return e.boards})).usersAll,a=(0,u.$)().t,c=(0,P.ZP)("div")((function(e){var r=e.theme;return{position:"relative",borderRadius:r.shape.borderRadius,backgroundColor:(0,te.Fq)(r.palette.common.white,.15),"&:hover":{backgroundColor:(0,te.Fq)(r.palette.common.white,.25)}}})),x=(0,P.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#6585F3"}})),p=(0,P.ZP)(ie.ZP)((function(e){var r=e.theme;return{color:"rgb(34 46 168)",fontWeight:700,"& .MuiInputBase-input":{padding:r.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(r.spacing(4),")"),transition:r.transitions.create("width")}}})),f=(0,P.ZP)(oe.Z)((function(e){var r=e.theme;return{textAlign:"left","& .MuiSelect-select":{padding:r.spacing(1.2,1,1.2,1),transition:r.transitions.create("width")},color:"rgb(34 46 168)",fontWeight:700,"& fieldset":{borderColor:"#3f51b5",borderWidth:"2px",backgroundColor:"rgba(213, 217, 233, .8)",zIndex:-1},"&:hover fieldset":{borderWidth:"1px"}}})),h=i.map((function(e){var r=l.find((function(r){return r.id===e}));return(0,t.Z)((0,t.Z)({},r),{},{name:(null===r||void 0===r?void 0:r.name)||"".concat(a("FILTER.UNKNOWN_USER")),id:(null===r||void 0===r?void 0:r.id)||"deleted"})})),b=s.useState([]),g=(0,d.Z)(b,2),v=g[0],Z=g[1];return(0,y.jsxs)(le.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",columnSpacing:{lg:1},px:3,py:1,sx:{position:"fixed",top:"68.5px",left:"0","@media only screen and (max-width: 900px)":{alignItems:"center",justifyContent:"center",flexDirection:"column"},"@media only screen and (max-width: 600px)":{position:"unset"}},children:[(0,y.jsxs)(le.ZP,{item:!0,container:!0,direction:"row",lg:6,md:4,sm:12,sx:{width:"100%","@media only screen and (max-width: 900px)":{alignItems:"center",justifyContent:"center"}},children:[(0,y.jsx)(pe.Z,{sx:{color:"#303F9F"}}),(0,y.jsx)(N.Z,{align:"left",variant:"h5",sx:{fontWeight:"bold",color:"#303F9F"},children:o.slice(2)})]}),(0,y.jsx)(le.ZP,{item:!0,lg:3,md:3,sm:6,xs:10,sx:{width:"100%"},children:(0,y.jsxs)(de.Z,{sx:{mx:1,py:1,display:"flex",justifyContent:"center"},children:[(0,y.jsx)(se.Z,{id:"demo-multiple-checkbox-label",sx:{p:0,m:0,color:"#686970"},children:h.length?a("FILTER.SELECT"):a("FILTER.NO_TASKS")}),(0,y.jsx)(ae.Z,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:v,onChange:function(e){var i=e.target.value;Z("string"===typeof i?i.split(","):i);var o=h.filter((function(r){return e.target.value.includes((null===r||void 0===r?void 0:r.name)||"")})).map((function(e){return(null===e||void 0===e?void 0:e.id)||""}));n((0,t.Z)((0,t.Z)({},r),{},{usersId:o}))},input:(0,y.jsx)(f,{label:a("FILTER.SELECT")}),renderValue:function(e){return e.join(", ")},disabled:0===h.length,children:null===h||void 0===h?void 0:h.map((function(e,r){return(0,y.jsxs)(ce.Z,{value:null===e||void 0===e?void 0:e.name,sx:{p:0,m:0},children:[(0,y.jsx)(ue.Z,{checked:v.indexOf((null===e||void 0===e?void 0:e.name)||"")>-1}),(0,y.jsx)(xe.Z,{primary:null===e||void 0===e?void 0:e.name})]},"".concat(null===e||void 0===e?void 0:e.id,"/").concat(r))}))})]})}),(0,y.jsx)(le.ZP,{item:!0,lg:3,md:3,sm:6,xs:10,sx:{width:"100%"},children:(0,y.jsxs)(c,{sx:{border:"2px solid #3f51b5",mx:1,backgroundColor:"rgba(213, 217, 233, .7)","&:hover":{backgroundColor:"rgba(213, 217, 233, .9)"}},children:[(0,y.jsx)(x,{children:(0,y.jsx)(fe.Z,{})}),(0,y.jsx)(p,{placeholder:a("FILTER.SEARCH"),value:r.searchText,autoFocus:!0,inputProps:{"aria-label":"search"},onChange:function(e){return n((0,t.Z)((0,t.Z)({},r),{},{searchText:e.target.value}))}})]})})]})},me=function(){var e=(0,s.useState)(!1),r=(0,d.Z)(e,2),n=r[0],j=r[1],I=(0,m.C)((function(e){return e.boards})),k=I.rejectMsg,C=I.singleBoard,w=C.columns,T=C.title,R=C.id,A=(0,s.useState)({searchText:"",usersId:[]}),N=(0,d.Z)(A,2),O=N[0],F=N[1],_=(0,m.T)(),L=(0,a.s0)(),M=(0,x.Z)("(max-width:600px)"),W=(0,u.$)().t,U=[];w.forEach((function(e){var r;null===e||void 0===e||null===(r=e.tasks)||void 0===r||r.forEach((function(e){U.includes(e.userId)||U.push(e.userId)}))})),(0,s.useEffect)((function(){return function(){_((0,b.Bq)())}}),[_]),(0,s.useEffect)((function(){if(k){var e=k.split("/"),r=(0,d.Z)(e,1)[0];r&&(401===+r?(_((0,v.ni)()),L("/signin",{replace:!0})):L("/not-found-board",{replace:!0}))}}),[k,_,L]);var B=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(r){var n,t,i,l,d,s,a,c,u,x;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.destination,t=r.draggableId,!R||!n){e.next=29;break}return i=w.find((function(e){return e.id===t})),l=i.order,d=n.index,s=l-d,_((0,g.MA)({columns:w,draggableColumn:i,newOrder:d,oldOrder:l})),e.next=9,_((0,g.Gw)({boardId:R,columnId:i.id,title:i.title,order:1e3}));case 9:if(!(s<0)){e.next=19;break}a=(0,o.Z)().mark((function e(r){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=w.find((function(e){return e.order===r})))){e.next=4;break}return e.next=4,_((0,g.Gw)({boardId:R,columnId:n.id,title:n.title,order:n.order-1}));case 4:case"end":return e.stop()}}),e)})),c=l+1;case 12:if(!(c<=d)){e.next=17;break}return e.delegateYield(a(c),"t0",14);case 14:c++,e.next=12;break;case 17:e.next=27;break;case 19:if(!(s>0)){e.next=27;break}u=(0,o.Z)().mark((function e(r){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=w.find((function(e){return e.order===r})))){e.next=4;break}return e.next=4,_((0,g.Gw)({boardId:R,columnId:n.id,title:n.title,order:n.order+1}));case 4:case"end":return e.stop()}}),e)})),x=l-1;case 22:if(!(x>=d)){e.next=27;break}return e.delegateYield(u(x),"t1",24);case 24:x--,e.next=22;break;case 27:return e.next=29,_((0,g.Gw)({boardId:R,columnId:i.id,title:i.title,order:d}));case 29:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,y.jsxs)(p.Z,{maxWidth:!1,sx:{height:"calc(100vh - 127px)",p:0,pt:"calc(71px)",background:"url('/project-management-app/pictures/background".concat(function(e){var r=e.slice(0,2);return"0"===r[0]?r[1]:r}(T),".webp')"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",overflowX:"auto",overflowY:"auto","@media only screen and (max-width: 900px)":{pt:"calc(148px)",height:"calc(100vh - 183px)"},"@media only screen and (max-width: 600px)":{pt:0},"@media only screen and (max-width: 450px)":{"&::-webkit-scrollbar":{width:"0",backgroundColor:"#f1f1f1"}},"&::-webkit-scrollbar":{height:".7rem"},"&::-webkit-scrollbar-thumb ":{backgroundColor:"#c8c8c8",borderRadius:2},"&::-webkit-scrollbar-thumb:hover ":{backgroundColor:"#a8a8a8"}},children:[(0,y.jsx)(he,{filters:O,setFilters:F,usersIdCreatedTasks:U}),(0,y.jsx)(c.Z5,{onDragEnd:function(e){var r=e.destination,n=e.source;r&&(r.droppableId===n.droppableId&&r.index===n.index||("board"===r.droppableId?B(e):function(e){var r,n,t,i,o,l,d=e.destination,s=e.source,a=e.draggableId,c=w.findIndex((function(e){return e.id===s.droppableId})),u=w.findIndex((function(e){return e.id===(null===d||void 0===d?void 0:d.droppableId)})),x=null===(r=w[c].tasks)||void 0===r?void 0:r.find((function(e){return e.id===a})),p=w[u].id,f=null===(n=w[c])||void 0===n||null===(t=n.tasks)||void 0===t?void 0:t.slice(0),h=null===(i=w[u])||void 0===i||null===(o=i.tasks)||void 0===o?void 0:o.slice(0),m=s.droppableId===(null===d||void 0===d?void 0:d.droppableId)&&s.index<(null===d||void 0===d?void 0:d.index),b=null===f||void 0===f?void 0:f.sort((function(e,r){return e.order-r.order})).slice(s.index+1),g=null===(l=h)||void 0===l?void 0:l.sort((function(e,r){return e.order-r.order})).slice(((null===d||void 0===d?void 0:d.index)||0)+(m?1:0)),v={boardId:R||"",columnIdFrom:s.droppableId,idColumnDestination:p,columnIdTo:(null===d||void 0===d?void 0:d.droppableId)||"",indexTaskTo:(null===d||void 0===d?void 0:d.index)||0,task:x,tasksFrom:b,tasksTo:g||[]},j={draggableTask:x,tasks:f||[],oldOrder:x.order,newOrder:(null===d||void 0===d?void 0:d.index)||0,columnId:w[c].id};if(c===u)_((0,Z.q8)(j));else if(c!==u){var I,k={draggableTask:x,tasks:h=h||[],oldOrder:(null===(I=h)||void 0===I?void 0:I.length)+1||0,newOrder:(null===d||void 0===d?void 0:d.index)||0,columnId:w[u].id},C={draggableTask:x,tasks:f||[],oldOrder:x.order,newOrder:100,columnId:w[c].id};_((0,Z.q8)(C)),_((0,Z.q8)(k))}_((0,Z.iY)(v))}(e)))},children:(0,y.jsx)(c.bK,{droppableId:"board",direction:M?"vertical":"horizontal",children:function(e){return(0,y.jsxs)(f.Z,(0,t.Z)((0,t.Z)({direction:{xs:"column",sm:"row"},spacing:0,component:"ul",justifyContent:"flex-start",alignItems:"flex-start",sx:{"@media only screen and (max-width: 600px)":{alignItems:"center",gap:"10px"}}},e.droppableProps),{},{ref:e.innerRef,children:[(0,i.Z)(w).sort((function(e,r){return e.order-r.order})).map((function(e){return(0,y.jsx)(ne,{column:e,filters:O},e.id)})),e.placeholder,(0,y.jsx)(h.Z,{variant:"outlined",size:"large",sx:{height:50,width:"100%",maxWidth:"400px",minWidth:"170px",padding:2,ml:2,mr:2,backgroundColor:"rgba(213, 217, 233, .7)","&:hover":{backgroundColor:"rgb(213, 217, 233)"}},onClick:function(){return j(!0)},children:W("COLUMN.NEW_COLUMN")})]}))}})}),(0,y.jsx)(S.Z,{open:n,onClose:function(){return j(!1)},children:(0,y.jsx)(E,{onClose:function(){return j(!1)}})})]})}}}]);
//# sourceMappingURL=504.b55e494b.chunk.js.map